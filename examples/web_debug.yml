Pipe:
  '@Ref': server

Components:
  - '@Kind': github.com/wzshiming/pipe/pipe/service.Service@multi
    '@Name': server
    Multi:
      - '@Kind': server
        Listener:
          '@Kind': network
          Network: tcp
          Address: :80
        Handler:
          '@Kind': http
          Handler:
            '@Ref': page

  - '@Kind': net/http.Handler@mux
    '@Name': page
    Routes:
      - Path: /
        Handler:
          '@Kind': multi
          Multi:
            - '@Kind': add_response_header
              Key: Content-Type
              Value: 'text/html; charset=utf-8'
            - '@Kind': direct
              Body:
                '@Kind': inline
                Data: |
                  <pre>
                  <a href="./expvar/">./expvar/</a>
                  <a href="./pprof/">./pprof/</a>
                  <a href="./config_dump/">./config_dump/</a>
                  </pre>
      - Path: /expvar/
        Handler:
          '@Kind': expvar
      - Prefix: /pprof/
        Handler:
          '@Kind': pprof
      - Path: /config_dump/
        Handler:
          '@Kind': config_dump