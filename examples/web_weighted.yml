Components:
- '@Kind': github.com/wzshiming/pipe/pipe/service.Service@stream
  '@Name': gateway
  Handler:
    '@Kind': github.com/wzshiming/pipe/pipe/stream.Handler@http
    Handler:
      '@Kind': net/http.Handler@log
      Handler:
        '@Ref': weighted
      Output:
        '@Kind': io.WriteCloser@file
        Path: /dev/stderr
    TLS: null
  Listener:
    '@Kind': github.com/wzshiming/pipe/pipe/stream/listener.ListenConfig@network
    Address: :80
    Network: tcp
- '@Kind': net/http.Handler@weighted
  '@Name': weighted
  Weighted:
  - Handler:
      '@Kind': net/http.Handler@direct
      Body:
        '@Kind': io.ReadCloser@inline
        Data: <html><body>This is Pipe page1 {{.Scheme}}://{{.Host}}{{.RequestURI}}</body></html>
      Code: 200
    Weight: 2
  - Handler:
      '@Kind': net/http.Handler@direct
      Body:
        '@Kind': io.ReadCloser@inline
        Data: <html><body>This is Pipe page2 {{.Scheme}}://{{.Host}}{{.RequestURI}}</body></html>
      Code: 200
    Weight: 8
Init: null
Pipe:
  '@Kind': github.com/wzshiming/pipe/pipe/service.Service@multi
  Multi:
  - '@Ref': gateway
